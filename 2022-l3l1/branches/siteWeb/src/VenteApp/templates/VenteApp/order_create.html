{% extends "siteWeb/base.html" %}
{% load static %}{% block pageContent %}
{% load crispy_forms_tags  %}
{% block content %}

<style type="text/css">
#cadre{
	position: relative;
	top : 275px;

}

#client{
	position: relative;
	top : 275px;

}
</style>

<script type="text/javascript">
$(document).ready(function() {
    // Get the CSRF token from the cookie
    var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();

    // Add the CSRF token to the AJAX request headers
    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
    });
});
</script>


<link rel="stylesheet" href="owlcarousel/owl.carousel.min.css">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

<div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-12">
	<div class='main'>
		<div class='containera-fluid'>
			<section id='main-content'>
				<div class='card'>


					<div class='card-title'>
						Création d'une commande
					</div>
					<div class='card-body'>

						<div class="client">
						<a href="{% url 'ClientApp:create_customer' %}"><button class="btn btn-dark" type="button">Créer un client </button></a>
						</div>

						<form method='post' id="my-form">
						{% csrf_token %}

							{{ form | crispy }}

							{{items.management_form}}

							{{cadre.management_form}}

							{{produit.management_form}}


	<div class='table-responsive'>
		<table class="table" class="table table-bordered">
		    {{ items.management_form }}

		    {% for form in items.forms %}
			{% if forloop.first %}
			    <thead>
			    <tr>
				{% for field in form.visible_fields %}
				    <th>{{ field.label|capfirst }}</th>
				{% endfor %}
			    </tr>

			    </thead>
			{% endif %}
			<tr class="form">
			    {% for field in form.visible_fields %}
				<td>

				    {# Include the hidden fields in the form #}
				    {% if forloop.first %}
					{% for hidden in form.hidden_fields %}
					    {{ hidden }}
					{% endfor %}
				    {% endif %}
				    {{ field.errors.as_ul }}
						{{ field }}
				</td>
			    {% endfor %}
			</tr>
		    {% endfor %}
		</table>

	</div>


							<a href="{% url 'VenteApp:cadre' %}"><button class="btn btn-dark" type="button">Créer un cadre </button></a>
	<br>

	<div class='table-responsive' class="table table-bordered">

		<table class="table">
		    {{ cadre.management_form }}


		    {% for form in cadre.forms %}
			{% if forloop.first %}
			    <thead>
			    <tr>
				{% for field in form.visible_fields %}
				    <th>{{ field.label|capfirst }}</th>
				{% endfor %}

			    </tr>
			    </thead>
			{% endif %}
			<tr class="formset_row">
			    {% for field in form.visible_fields %}
				<td>
				    {# Include the hidden fields in the form #}
				    {% if forloop.first %}
					{% for hidden in form.hidden_fields %}
					    {{ hidden }}
					{% endfor %}
				    {% endif %}
				    {{ field.errors.as_ul }}
				    {{ field }}
				</td>
			    {% endfor %}


			</tr>
		    {% endfor %}

		</table>


	</div>

	<a href="{% url 'ProduitApp:add_autre_produit' %}"><button class="btn btn-dark" type="button">Créer un produit autre </button></a>

	<div class='table-responsive' class="table table-bordered">

		<table class="table">
		    {{ produit.management_form }}


		    {% for form in produit.forms %}
			{% if forloop.first %}
			    <thead>
			    <tr>
				{% for field in form.visible_fields %}
				    <th>{{ field.label|capfirst }}</th>
				{% endfor %}

			    </tr>
			    </thead>
			{% endif %}
			<tr class="form_autre">
			    {% for field in form.visible_fields %}
				<td>
				    {# Include the hidden fields in the form #}
				    {% if forloop.first %}
					{% for hidden in form.hidden_fields %}
					    {{ hidden }}
					{% endfor %}
				    {% endif %}
				    {{ field.errors.as_ul }}
				    {{ field }}
				</td>
			    {% endfor %}

			</tr>
		    {% endfor %}
		</table>


	</div>



							<p><a href="{% url 'VenteApp:venteApp' %}">Annuler</a>
								<button type = sumbit class="save btn btn-default">Sauvegarder</button></p>
						</form>




					</div>
	</div>
</div>
				</div>


			</section>
		</div>
		<!-- / container -->
	</div>

	<!-- /main -->
</div>





</div>






<!-- /content-wrap -->
{% endblock content %}

{% block javascript %}

<script src="{% static 'formset/jquery.formset.js' %}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>


<script type="text/javascript">


    $('.form').formset({
	addText: '<button class="btn btn-outline-dark" type="button">Ajouter produit</button>',
        deleteText: 'supprimer',
        prefix: 'items'

    });

    $('.formset_row').formset({
	addText: '<button class="btn btn-outline-dark" type="button">Ajouter article </button>',
        deleteText: 'supprimer',
        prefix: 'cadre'

    });

    $('.form_autre').formset({
	addText: '<button class="btn btn-outline-dark" type="button">Ajouter autre(s) produit(s) </button>',
        deleteText: 'supprimer',
        prefix: 'produit'

    });


</script>






{% endblock %}
{% endblock pageContent %}
